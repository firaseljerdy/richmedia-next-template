var TweenUi=pc.createScript("tweenUi");TweenUi.attributes.add("target",{type:"entity"}),TweenUi.prototype.initialize=function(){var t,e=new dat.GUI;if(this.target.script.tweenPosition)t=this.target.script.tweenPosition;else if(this.target.script.tweenScale)t=this.target.script.tweenScale;else if(this.target.script.tweenRotation)t=this.target.script.tweenRotation;else if(this.target.script.tweenMaterial){t=this.target.script.tweenMaterial;var i=new pc.Color,n=new pc.Color,a={from:[255*t.fromDiffuse.r,255*t.fromDiffuse.g,255*t.fromDiffuse.b],to:[255*t.toDiffuse.r,255*t.toDiffuse.g,255*t.toDiffuse.b]};e.addColor(a,"from").onChange((function(e){i.set(e[0]/255,e[1]/255,e[2]/255),t.fromDiffuse=i})),e.addColor(a,"to").onChange((function(e){n.set(e[0]/255,e[1]/255,e[2]/255),t.toDiffuse=n}))}e.add(t,"duration",.5,2),e.add(t,"easing",["Linear","QuadraticIn","QuadraticOut","QuadraticInOut","CubicIn","CubicOut","CubicInOut","QuarticIn","QuarticOut","QuarticInOut","QuinticIn","QuinticOut","QuinticInOut","SineIn","SineOut","SineInOut","ExponentialIn","ExponentialOut","ExponentialInOut","CircularIn","CircularOut","CircularInOut","BackIn","BackOut","BackInOut","BounceIn","BounceOut","BounceInOut","ElasticIn","ElasticOut","ElasticInOut"]),e.add(t,"delay",0,2),e.add(t,"loop",!0),e.add(t,"yoyo",!1),e.add(t,"repeat",0).step(1)};pc.extend(pc,function(){var TweenManager=function(t){this._app=t,this._tweens=[],this._add=[]};TweenManager.prototype={add:function(t){return this._add.push(t),t},update:function(t){for(var i=0,e=this._tweens.length;i<e;)this._tweens[i].update(t)?i++:(this._tweens.splice(i,1),e--);if(this._add.length){for(let t=0;t<this._add.length;t++)this._tweens.indexOf(this._add[t])>-1||this._tweens.push(this._add[t]);this._add.length=0}}};var Tween=function(t,i,e){pc.events.attach(this),this.manager=i,e&&(this.entity=null),this.time=0,this.complete=!1,this.playing=!1,this.stopped=!0,this.pending=!1,this.target=t,this.duration=0,this._currentDelay=0,this.timeScale=1,this._reverse=!1,this._delay=0,this._yoyo=!1,this._count=0,this._numRepeats=0,this._repeatDelay=0,this._from=!1,this._slerp=!1,this._fromQuat=new pc.Quat,this._toQuat=new pc.Quat,this._quat=new pc.Quat,this.easing=pc.Linear,this._sv={},this._ev={}},_parseProperties=function(t){var i;return t instanceof pc.Vec2?i={x:t.x,y:t.y}:t instanceof pc.Vec3?i={x:t.x,y:t.y,z:t.z}:t instanceof pc.Vec4||t instanceof pc.Quat?i={x:t.x,y:t.y,z:t.z,w:t.w}:t instanceof pc.Color?(i={r:t.r,g:t.g,b:t.b},void 0!==t.a&&(i.a=t.a)):i=t,i};Tween.prototype={to:function(t,i,e,s,n,r){return this._properties=_parseProperties(t),this.duration=i,e&&(this.easing=e),s&&this.delay(s),n&&this.repeat(n),r&&this.yoyo(r),this},from:function(t,i,e,s,n,r){return this._properties=_parseProperties(t),this.duration=i,e&&(this.easing=e),s&&this.delay(s),n&&this.repeat(n),r&&this.yoyo(r),this._from=!0,this},rotate:function(t,i,e,s,n,r){return this._properties=_parseProperties(t),this.duration=i,e&&(this.easing=e),s&&this.delay(s),n&&this.repeat(n),r&&this.yoyo(r),this._slerp=!0,this},start:function(){var t,i,e,s;if(this.playing=!0,this.complete=!1,this.stopped=!1,this._count=0,this.pending=this._delay>0,this._reverse&&!this.pending?this.time=this.duration:this.time=0,this._from){for(t in this._properties)this._properties.hasOwnProperty(t)&&(this._sv[t]=this._properties[t],this._ev[t]=this.target[t]);this._slerp&&(this._toQuat.setFromEulerAngles(this.target.x,this.target.y,this.target.z),i=void 0!==this._properties.x?this._properties.x:this.target.x,e=void 0!==this._properties.y?this._properties.y:this.target.y,s=void 0!==this._properties.z?this._properties.z:this.target.z,this._fromQuat.setFromEulerAngles(i,e,s))}else{for(t in this._properties)this._properties.hasOwnProperty(t)&&(this._sv[t]=this.target[t],this._ev[t]=this._properties[t]);this._slerp&&(i=void 0!==this._properties.x?this._properties.x:this.target.x,e=void 0!==this._properties.y?this._properties.y:this.target.y,s=void 0!==this._properties.z?this._properties.z:this.target.z,void 0!==this._properties.w?(this._fromQuat.copy(this.target),this._toQuat.set(i,e,s,this._properties.w)):(this._fromQuat.setFromEulerAngles(this.target.x,this.target.y,this.target.z),this._toQuat.setFromEulerAngles(i,e,s)))}return this._currentDelay=this._delay,this.manager.add(this),this},pause:function(){this.playing=!1},resume:function(){this.playing=!0},stop:function(){this.playing=!1,this.stopped=!0},delay:function(t){return this._delay=t,this.pending=!0,this},repeat:function(t,i){return this._count=0,this._numRepeats=t,this._repeatDelay=i||0,this},loop:function(t){return t?(this._count=0,this._numRepeats=1/0):this._numRepeats=0,this},yoyo:function(t){return this._yoyo=t,this},reverse:function(){return this._reverse=!this._reverse,this},chain:function(){for(var t=arguments.length;t--;)t>0?arguments[t-1]._chained=arguments[t]:this._chained=arguments[t];return this},onUpdate:function(t){return this.on("update",t),this},onComplete:function(t){return this.on("complete",t),this},onLoop:function(t){return this.on("loop",t),this},update:function(t){if(this.stopped)return!1;if(!this.playing)return!0;if(!this._reverse||this.pending?this.time+=t*this.timeScale:this.time-=t*this.timeScale,this.pending){if(!(this.time>this._currentDelay))return!0;this._reverse?this.time=this.duration-(this.time-this._currentDelay):this.time-=this._currentDelay,this.pending=!1}var i=0;(!this._reverse&&this.time>this.duration||this._reverse&&this.time<0)&&(this._count++,this.complete=!0,this.playing=!1,this._reverse?(i=this.duration-this.time,this.time=0):(i=this.time-this.duration,this.time=this.duration));var e,s,n=0===this.duration?1:this.time/this.duration,r=this.easing(n);for(var h in this._properties)this._properties.hasOwnProperty(h)&&(e=this._sv[h],s=this._ev[h],this.target[h]=e+(s-e)*r);if(this._slerp&&this._quat.slerp(this._fromQuat,this._toQuat,r),this.entity&&(this.entity._dirtifyLocal(),this.element&&this.entity.element&&(this.entity.element[this.element]=this.target),this._slerp&&this.entity.setLocalRotation(this._quat)),this.fire("update",t),this.complete){var a=this._repeat(i);return a?this.fire("loop"):(this.fire("complete",i),this.entity&&this.entity.off("destroy",this.stop,this),this._chained&&this._chained.start()),a}return!0},_repeat:function(t){if(this._count<this._numRepeats){if(this._reverse?this.time=this.duration-t:this.time=t,this.complete=!1,this.playing=!0,this._currentDelay=this._repeatDelay,this.pending=!0,this._yoyo){for(var i in this._properties){var e=this._sv[i];this._sv[i]=this._ev[i],this._ev[i]=e}this._slerp&&(this._quat.copy(this._fromQuat),this._fromQuat.copy(this._toQuat),this._toQuat.copy(this._quat))}return!0}return!1}};var BounceOut=function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},BounceIn=function(t){return 1-BounceOut(1-t)};return{TweenManager:TweenManager,Tween:Tween,Linear:function(t){return t},QuadraticIn:function(t){return t*t},QuadraticOut:function(t){return t*(2-t)},QuadraticInOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)},CubicIn:function(t){return t*t*t},CubicOut:function(t){return--t*t*t+1},CubicInOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},QuarticIn:function(t){return t*t*t*t},QuarticOut:function(t){return 1- --t*t*t*t},QuarticInOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},QuinticIn:function(t){return t*t*t*t*t},QuinticOut:function(t){return--t*t*t*t*t+1},QuinticInOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},SineIn:function(t){return 0===t?0:1===t?1:1-Math.cos(t*Math.PI/2)},SineOut:function(t){return 0===t?0:1===t?1:Math.sin(t*Math.PI/2)},SineInOut:function(t){return 0===t?0:1===t?1:.5*(1-Math.cos(Math.PI*t))},ExponentialIn:function(t){return 0===t?0:Math.pow(1024,t-1)},ExponentialOut:function(t){return 1===t?1:1-Math.pow(2,-10*t)},ExponentialInOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))},CircularIn:function(t){return 1-Math.sqrt(1-t*t)},CircularOut:function(t){return Math.sqrt(1- --t*t)},CircularInOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},BackIn:function(t){var i=1.70158;return t*t*((i+1)*t-i)},BackOut:function(t){var i=1.70158;return--t*t*((i+1)*t+i)+1},BackInOut:function(t){var i=2.5949095;return(t*=2)<1?t*t*((i+1)*t-i)*.5:.5*((t-=2)*t*((i+1)*t+i)+2)},BounceIn:BounceIn,BounceOut:BounceOut,BounceInOut:function(t){return t<.5?.5*BounceIn(2*t):.5*BounceOut(2*t-1)+.5},ElasticIn:function(t){var i,e=.1;return 0===t?0:1===t?1:(!e||e<1?(e=1,i=.1):i=.4*Math.asin(1/e)/(2*Math.PI),-e*Math.pow(2,10*(t-=1))*Math.sin((t-i)*(2*Math.PI)/.4))},ElasticOut:function(t){var i,e=.1;return 0===t?0:1===t?1:(!e||e<1?(e=1,i=.1):i=.4*Math.asin(1/e)/(2*Math.PI),e*Math.pow(2,-10*t)*Math.sin((t-i)*(2*Math.PI)/.4)+1)},ElasticInOut:function(t){var i,e=.1,s=.4;return 0===t?0:1===t?1:(!e||e<1?(e=1,i=.1):i=s*Math.asin(1/e)/(2*Math.PI),(t*=2)<1?e*Math.pow(2,10*(t-=1))*Math.sin((t-i)*(2*Math.PI)/s)*-.5:e*Math.pow(2,-10*(t-=1))*Math.sin((t-i)*(2*Math.PI)/s)*.5+1)}}}()),function(){pc.AppBase.prototype.addTweenManager=function(){this._tweenManager=new pc.TweenManager(this),this.on("update",(function(t){this._tweenManager.update(t)}))},pc.AppBase.prototype.tween=function(t){return new pc.Tween(t,this._tweenManager)},pc.Entity.prototype.tween=function(t,i){var e=this._app.tween(t);return e.entity=this,this.once("destroy",e.stop,e),i&&i.element&&(e.element=i.element),e};var t=pc.AppBase.getApplication();t&&t.addTweenManager()}();var TweenScale=pc.createScript("tweenScale");TweenScale.attributes.add("duration",{type:"number",default:1}),TweenScale.attributes.add("easing",{type:"string",default:"Linear"}),TweenScale.attributes.add("delay",{type:"number",default:0}),TweenScale.attributes.add("loop",{type:"boolean",default:!0}),TweenScale.attributes.add("yoyo",{type:"boolean",default:!1}),TweenScale.attributes.add("repeat",{type:"number",default:2}),TweenScale.attributes.add("scaleTo",{type:"number",default:2}),TweenScale.attributes.add("scaleOnStart",{type:"boolean",default:!1}),TweenScale.attributes.add("scaleOnStartfirstFactor",{type:"number",default:1.5}),TweenScale.attributes.add("scaleOnStartsecondFactor",{type:"number",default:1}),TweenScale.attributes.add("scaleOnStartlastFactor",{type:"number",default:1}),TweenScale.prototype.initialize=function(){this.reset()},TweenScale.prototype.reset=function(){this.tween&&this.tween.stop(),this.scaleOnStart?(this.entity.setLocalScale(0,0,0),this.tween=this.entity.tween(this.entity.getLocalScale()).to({x:this.scaleOnStartfirstFactor,y:this.scaleOnStartfirstFactor,z:this.scaleOnStartfirstFactor},.5,pc.SineOut).delay(this.delay).start().chain(this.entity.tween(this.entity.getLocalScale()).to({x:this.scaleOnStartsecondFactor,y:this.scaleOnStartsecondFactor,z:this.scaleOnStartsecondFactor},.3,pc.SineInOut)).chain(this.entity.tween(this.entity.getLocalScale()).to({x:1,y:1,z:1},.3,pc.SineInOut))):(this.entity.setLocalScale(1,1,1),this.tween=this.entity.tween(this.entity.getLocalScale()).to(new pc.Vec3(this.scaleTo,this.scaleTo,this.scaleTo),this.duration,pc[this.easing]).delay(this.delay).loop(this.loop).yoyo(this.yoyo),this.loop||this.tween.repeat(this.repeat),this.tween.start())},TweenScale.prototype.scaleDown=function(t,e){this.tween&&this.tween.stop(),t=t||this.duration,e=e||pc.Linear,this.tween=this.entity.tween(this.entity.getLocalScale()).to({x:1.2,y:1.2,z:1.2},.5*t,e).start().chain(this.entity.tween(this.entity.getLocalScale()).to({x:1,y:1,z:1},.3*t,pc.SineOut)).chain(this.entity.tween(this.entity.getLocalScale()).to({x:0,y:0,z:0},.2*t,pc.SineInOut))},TweenScale.prototype.scaleDownSlightly=function(t,e,a){this.tween&&this.tween.stop(),e=e||this.duration,a=a||pc.Linear;var n={x:t,y:t,z:t};this.tween=this.entity.tween(this.entity.getLocalScale()).to(n,e,a).start()},TweenScale.prototype.playScaleOnStartTween=function(){this.tween&&this.tween.stop(),this.entity.setLocalScale(0,0,0),this.tween=this.entity.tween(this.entity.getLocalScale()).to({x:this.scaleOnStartfirstFactor,y:this.scaleOnStartfirstFactor,z:this.scaleOnStartfirstFactor},.5,pc.SineOut).delay(this.delay).start().chain(this.entity.tween(this.entity.getLocalScale()).to({x:this.scaleOnStartsecondFactor,y:this.scaleOnStartsecondFactor,z:this.scaleOnStartsecondFactor},.3,pc.SineInOut)).chain(this.entity.tween(this.entity.getLocalScale()).to({x:this.scaleOnStartlastFactor,y:this.scaleOnStartlastFactor,z:this.scaleOnStartlastFactor},.3,pc.SineInOut))},TweenScale.prototype.bounce=function(){this.tween&&this.tween.stop(),this.tween=this.entity.tween(this.entity.getLocalScale()).to({x:1.1,y:1.1,z:1.1},.1,pc.SineOut).start().chain(this.entity.tween(this.entity.getLocalScale()).to({x:.9,y:.9,z:.9},.1,pc.SineInOut)).chain(this.entity.tween(this.entity.getLocalScale()).to({x:1,y:1,z:1},.07,pc.SineInOut))};var TweenPosition=pc.createScript("tweenPosition");TweenPosition.attributes.add("duration",{type:"number",default:1}),TweenPosition.attributes.add("easing",{type:"string",default:"Linear"}),TweenPosition.attributes.add("delay",{type:"number",default:0}),TweenPosition.attributes.add("loop",{type:"boolean",default:!0}),TweenPosition.attributes.add("yoyo",{type:"boolean",default:!1}),TweenPosition.attributes.add("repeat",{type:"number",default:2}),TweenPosition.attributes.add("moveOnStart",{type:"boolean",default:!1}),TweenPosition.attributes.add("targetPosition",{type:"vec3",default:[0,-2.05,0]}),TweenPosition.prototype.initialize=function(){this.originalPosition=this.entity.getLocalPosition().clone(),this.rightTween=null,this.leftTween=null,this.reset()},TweenPosition.prototype.reset=function(){this.rightTween&&this.rightTween.stop(),this.leftTween&&this.leftTween.stop(),this.moveOnStart?this.entity.tween(this.entity.getLocalPosition()).to(new pc.Vec3(this.targetPosition.x,this.targetPosition.y,this.targetPosition.z),this.duration,pc[this.easing]).delay(this.delay).start():(this.rightTween=this.entity.tween(this.entity.getLocalPosition()).to(new pc.Vec3(1,this.entity.getLocalPosition().y,0),this.duration,pc[this.easing]).delay(this.delay),this.leftTween=this.entity.tween(this.entity.getLocalPosition()).to(new pc.Vec3(-1,this.entity.getLocalPosition().y,0),this.duration,pc[this.easing]).delay(this.delay),this.rightTween.chain(this.leftTween),this.rightTween.loop(this.loop).yoyo(this.yoyo),this.leftTween.loop(this.loop).yoyo(this.yoyo),this.rightTween.start())},TweenPosition.prototype.stopAndReset=function(){this.rightTween&&this.rightTween.stop(),this.leftTween&&this.leftTween.stop(),this.entity.tween(this.entity.getLocalPosition()).to(this.originalPosition,this.duration,pc[this.easing]).start()};var InfiniteScroller=pc.createScript("infiniteScroller");InfiniteScroller.attributes.add("cloud1",{type:"entity"}),InfiniteScroller.attributes.add("cloud2",{type:"entity"}),InfiniteScroller.attributes.add("scrollSpeed",{type:"number",default:1}),InfiniteScroller.prototype.initialize=function(){this.startPos1=new pc.Vec3(392,-588,0),this.endPos1=new pc.Vec3(392,1761,0),this.startPos2=new pc.Vec3(392,-588,0),this.endPos2=new pc.Vec3(392,1761,0),this.cloud1.setPosition(this.startPos1),this.cloud2.setPosition(this.startPos2),this.resetPosition(this.cloud2)},InfiniteScroller.prototype.update=function(t){this.scrollEntity(this.cloud1,t),this.scrollEntity(this.cloud2,t)},InfiniteScroller.prototype.scrollEntity=function(t,i){var e=t.getPosition();e.y+=this.scrollSpeed*i,e.y>=this.endPos1.y||t.setPosition(e)},InfiniteScroller.prototype.resetPosition=function(t){t===this.cloud1?t.setPosition(this.startPos1):t===this.cloud2&&t.setPosition(this.startPos2)};var GameManager=pc.createScript("gameManager");GameManager.gameStarted=!1,GameManager.score=0,GameManager.maxHealth=3,GameManager.currentHealth=3,GameManager.attributes.add("plane",{type:"entity"}),GameManager.attributes.add("planeCollider",{type:"entity"}),GameManager.attributes.add("misscollider",{type:"entity"}),GameManager.prototype.initialize=function(){GameManager.instance=this,this.currentHealth=3},GameManager.prototype.startGame=function(){console.log("game started"),this.gameStarted=!0,Uimanager.instance.resetScore(),this.currentHealth=3,this.plane.script.tweenPosition.stopAndReset(),Uimanager.instance.showIngameElements(),Spawner.instance.startSpawning(),ScrollingImage.setSpeed(250),setTimeout(function(){this.misscollider.collision.enabled=!0}.bind(this),2500)},GameManager.prototype.setScore=function(e){this.score=e},GameManager.prototype.loseHealth=function(){this.currentHealth-=1,Uimanager.instance.removelife(),console.log(this.currentHealth)},GameManager.prototype.isGameOver=function(){return this.currentHealth<=0},GameManager.prototype.loseGame=function(){Uimanager.instance.loseGame(),Spawner.instance.stopSpawning(),this.plane.script.playerController.shutdown(),ScrollingImage.setSpeed(100),this.misscollider.collision.enabled=!1,this.planeCollider.collision.enabled=!1,this.currentHealth=0},GameManager.prototype.restartGame=function(){ScrollingImage.setSpeed(250),this.currentHealth=3,this.score=0,setTimeout(function(){this.misscollider.collision.enabled=!0,this.planeCollider.collision.enabled=!0}.bind(this),3500),this.plane.script.playerController.enable(),Uimanager.instance.showIngameElements(),Uimanager.instance.resetGame(),Spawner.instance.startSpawning()};var Uimanager=pc.createScript("uimanager");Uimanager.attributes.add("startButton",{type:"entity"}),Uimanager.attributes.add("learnMoreButton",{type:"entity"}),Uimanager.attributes.add("retryButton",{type:"entity"}),Uimanager.attributes.add("headline",{type:"entity"}),Uimanager.attributes.add("headline1",{type:"entity"}),Uimanager.attributes.add("planeBarSlider",{type:"entity"}),Uimanager.attributes.add("scoreText",{type:"entity"}),Uimanager.attributes.add("scoreNumber",{type:"entity"}),Uimanager.attributes.add("heart1",{type:"entity"}),Uimanager.attributes.add("heart2",{type:"entity"}),Uimanager.attributes.add("heart3",{type:"entity"}),Uimanager.attributes.add("emptyheart1",{type:"entity"}),Uimanager.attributes.add("emptyheart2",{type:"entity"}),Uimanager.attributes.add("emptyheart3",{type:"entity"}),Uimanager.attributes.add("player",{type:"entity"}),Uimanager.attributes.add("cloud1",{type:"entity"}),Uimanager.attributes.add("cloud2",{type:"entity"}),Uimanager.attributes.add("cloud3",{type:"entity"}),Uimanager.attributes.add("cloud4",{type:"entity"}),Uimanager.attributes.add("headlineEnd",{type:"entity"}),Uimanager.attributes.add("panadolEnd",{type:"entity"}),Uimanager.prototype.initialize=function(){Uimanager.instance=this,this.resetScore(),this.planeBarSlider.enabled=!1,this.scoreText.enabled=!1,this.scoreNumber.enabled=!1,this.heart1.enabled=!1,this.heart3.enabled=!1,this.heart2.enabled=!1,this.headlineEnd.enabled=!1,this.panadolEnd.enabled=!1,this.learnMoreButton.enabled=!1,this.retryButton.enabled=!1,this.emptyheart1.enabled=!1,this.emptyheart3.enabled=!1,this.emptyheart2.enabled=!1,this.cloud1.script.cloud.imageElement.opacity=.3,this.cloud2.script.cloud.imageElement.opacity=.3,this.cloud3.script.cloud.imageElement.opacity=.3,this.cloud4.script.cloud.imageElement.opacity=.3,this.startButton&&this.startButton.element?(this.startButton.element.on("click",this.onStartButtonClick,this),this.startButton.element.on("touchstart",this.onStartButtonTouchStart,this)):console.error("Start button entity not assigned or missing element component."),this.retryButton&&this.retryButton.element?(this.retryButton.element.on("click",this.onRetryButtonClick,this),this.retryButton.element.on("touchstart",this.onRetryButtonTouchStart,this)):console.error("Retry button entity not assigned or missing element component."),this.startButtonTouchHandled=!1,this.retryButtonTouchHandled=!1},Uimanager.prototype.onRetryButtonClick=function(t){this.retryButtonTouchHandled&&(this.retryButtonTouchHandled=!1)},Uimanager.prototype.onRetryButtonTouchStart=function(t){this.retryButtonTouchHandled=!0,GameManager.instance.restartGame()},Uimanager.prototype.onStartButtonClick=function(t){this.startButtonTouchHandled&&(this.startButtonTouchHandled=!1)},Uimanager.prototype.onStartButtonTouchStart=function(t){this.startButtonTouchHandled=!0,this.triggerScaleDown(),this.setCloudsOpacityToStart(),GameManager.instance.startGame()},Uimanager.prototype.setCloudsOpacityToStart=function(){this.cloud1.script.cloud.startLerpingUp(),this.cloud2.script.cloud.startLerpingUp(),this.cloud3.script.cloud.startLerpingUp(),this.cloud4.script.cloud.startLerpingUp()},Uimanager.prototype.showIngameElements=function(){this.scoreText.enabled=!0,this.scoreNumber.enabled=!0,this.heart1.enabled=!0,this.heart3.enabled=!0,this.heart2.enabled=!0,this.scoreText.script&&this.scoreText.script.tweenScale&&this.scoreText.script.tweenScale.playScaleOnStartTween(),this.scoreNumber.script&&this.scoreNumber.script.tweenScale&&this.scoreNumber.script.tweenScale.playScaleOnStartTween(),this.heart1.script&&this.heart1.script.tweenScale&&this.heart1.script.tweenScale.playScaleOnStartTween(),this.heart2.script&&this.heart2.script.tweenScale&&(console.log("scale"),this.heart2.script.tweenScale.playScaleOnStartTween()),this.heart3.script&&this.heart3.script.tweenScale&&this.heart3.script.tweenScale.playScaleOnStartTween(),this.planeBarSlider.enabled=!0,this.planeBarSlider.script.tweenScale.playScaleOnStartTween()},Uimanager.prototype.triggerScaleDown=function(){this.startButton.script&&this.startButton.script.tweenScale&&this.startButton.script.tweenScale.scaleDown(1.2,pc.SineInOut),this.headline.script&&this.headline.script.tweenScale&&this.headline.script.tweenScale.scaleDown(.8,pc.SineInOut),this.headline1.script&&this.headline1.script.tweenScale&&this.headline1.script.tweenScale.scaleDown(1,pc.SineInOut)},Uimanager.prototype.increaseScore=function(){this.currentScore+=1,this.scoreNumber.element.text=this.currentScore.toString(),this.scoreNumber.script.tweenScale.bounce(),GameManager.instance.setScore(this.currentScore)},Uimanager.prototype.resetScore=function(){this.currentScore=0,GameManager.instance.setScore(this.currentScore),this.scoreNumber.element.text=this.currentScore.toString()},Uimanager.prototype.resetGame=function(){this.panadolEnd.script.tweenScale.scaleDown(0,pc.SineInOut),this.headlineEnd.script.tweenScale.scaleDown(0,pc.SineInOut),this.learnMoreButton.script.tweenScale.scaleDown(0,pc.SineInOut),this.retryButton.script.tweenScale.scaleDown(0,pc.SineInOut),this.player.script.tweenScale.playScaleOnStartTween(),this.cloud1.script.cloud.startLerpingUp(),this.cloud2.script.cloud.startLerpingUp(),this.cloud3.script.cloud.startLerpingUp(),this.cloud4.script.cloud.startLerpingUp(),this.resetScore()},Uimanager.prototype.loseGame=function(){this.panadolEnd.enabled=!0,this.headlineEnd.enabled=!0,this.learnMoreButton.enabled=!0,this.retryButton.enabled=!0,this.scoreText.script.tweenScale.scaleDownSlightly(.5),this.scoreNumber.script.tweenScale.scaleDownSlightly(.5),this.emptyheart3.script.tweenScale.scaleDown(0,pc.SineInOut),this.emptyheart2.script.tweenScale.scaleDown(0,pc.SineInOut),this.emptyheart1.script.tweenScale.scaleDown(0,pc.SineInOut),this.player.script.tweenScale.scaleDown(0,pc.SineInOut),this.cloud1.script.cloud.startLerpingDown(),this.cloud2.script.cloud.startLerpingDown(),this.cloud3.script.cloud.startLerpingDown(),this.cloud4.script.cloud.startLerpingDown(),this.learnMoreButton.script.tweenScale.playScaleOnStartTween(),this.retryButton.script.tweenScale.playScaleOnStartTween(),this.headlineEnd.script.tweenScale.playScaleOnStartTween(),this.panadolEnd.script.tweenScale.playScaleOnStartTween(),this.planeBarSlider.script.tweenScale.scaleDown(.1,pc.SineInOut)},Uimanager.prototype.removelife=function(){this.heart3.enabled?(this.heart3.enabled=!1,this.emptyheart3.enabled=!0,this.heart3.script.tweenScale.scaleDown(0),this.emptyheart3.script.tweenScale.playScaleOnStartTween()):this.heart2.enabled?(this.heart2.enabled=!1,this.emptyheart2.enabled=!0,this.heart2.script.tweenScale.scaleDown(0),this.emptyheart2.script.tweenScale.playScaleOnStartTween()):this.heart1.enabled&&(this.heart1.enabled=!1,this.emptyheart1.enabled=!0,this.heart1.script.tweenScale.scaleDown(0),this.emptyheart1.script.tweenScale.playScaleOnStartTween())};var PlayerController=pc.createScript("playerController");PlayerController.attributes.add("sensitivity",{type:"number",default:.02}),PlayerController.attributes.add("leftX",{type:"number",default:-.7}),PlayerController.attributes.add("rightX",{type:"number",default:.7}),PlayerController.attributes.add("lerpSpeed",{type:"number",default:.2}),PlayerController.prototype.initialize=function(){this.startX=this.entity.getPosition().x,this.resetPosition(),this.minX=this.leftX,this.maxX=this.rightX,this.initialTouchX=null,this.app.touch.on(pc.EVENT_TOUCHSTART,this.onTouchStart,this),this.app.touch.on(pc.EVENT_TOUCHMOVE,this.onTouchMove,this),this.app.touch.on(pc.EVENT_TOUCHEND,this.onTouchEnd,this),this.targetX=this.startX},PlayerController.prototype.resetPosition=function(){this.entity.setPosition(this.startX,this.entity.getPosition().y,this.entity.getPosition().z),this.targetX=this.startX,this.initialTouchX=null},PlayerController.prototype.onTouchStart=function(t){if(t.touches.length>0){var i=t.touches[0];this.initialTouchX=i.x}},PlayerController.prototype.onTouchMove=function(t){if(null!==this.initialTouchX&&t.touches.length>0){var i=(t.touches[0].x-this.initialTouchX)*this.sensitivity;this.targetX=this.startX+i,this.targetX=pc.math.clamp(this.targetX,this.minX,this.maxX)}},PlayerController.prototype.onTouchEnd=function(t){this.initialTouchX=null,this.startX=this.targetX},PlayerController.prototype.update=function(t){var i=this.entity.getPosition(),o=pc.math.lerp(i.x,this.targetX,this.lerpSpeed*t);this.entity.setPosition(o,i.y,i.z)},PlayerController.prototype.shutdown=function(){this.app.touch.off(pc.EVENT_TOUCHSTART,this.onTouchStart,this),this.app.touch.off(pc.EVENT_TOUCHMOVE,this.onTouchMove,this),this.app.touch.off(pc.EVENT_TOUCHEND,this.onTouchEnd,this)},PlayerController.prototype.enable=function(){this.app.touch.on(pc.EVENT_TOUCHSTART,this.onTouchStart,this),this.app.touch.on(pc.EVENT_TOUCHMOVE,this.onTouchMove,this),this.app.touch.on(pc.EVENT_TOUCHEND,this.onTouchEnd,this),this.resetPosition()};var ObstacleCollectable=pc.createScript("obstacleCollectable");ObstacleCollectable.attributes.add("yellowObstacleID",{type:"string"}),ObstacleCollectable.prototype.initialize=function(){},ObstacleCollectable.prototype.update=function(t){this.entity.rotate(10*Math.random()*t,0,0)};var Trigger=pc.createScript("trigger");Trigger.prototype.initialize=function(){this.entity.collision.on("collisionstart",this.onCollisionStart,this)},Trigger.prototype.onCollisionStart=function(e){if(e.other.rigidbody)if(e.other.tags.has("player")){Uimanager.instance.increaseScore();let t=e.other.parent;t&&t.script&&t.script.tweenScale&&t.script.tweenScale.bounce(),this.scaleAndDestroy()}else if(e.other.tags.has("miss")){GameManager.instance.loseHealth();GameManager.instance.isGameOver()?GameManager.instance.loseGame():console.log("");this.scaleAndDestroy()}},Trigger.prototype.scaleAndDestroy=function(){this.entity.script.tweenScale.scaleDownSlightly(0,.05,pc.SineInOut),setTimeout((()=>{this.entity.destroy()}),50)};// ObstacleManager.js
// var ObstacleManager = pc.createScript('obstacleManager');

// ObstacleManager.attributes.add('powerups', { type: 'entity', array: true });
// ObstacleManager.attributes.add('spawnPoints', { type: 'entity', array: true });


// ObstacleManager.prototype.powerupMap = {};

// // initialize code called once per entity
// ObstacleManager.prototype.initialize = function() {
//     ObstacleManager.instance = this;
//     this.spawnInterval = this.getRandomSpawnInterval();

//     this.startPowerupSpawning();
// };Ã¥
// ObstacleManager.prototype.startPowerupSpawning = function() {    
//     this.powerups.forEach(function(power) {
//         power.enabled = false;
//         var powerupScript = power.script.obstacleCollectable; 
        
//         this.powerupMap[powerupScript.yellowObstacleID] = power;
//         console.log("powerups ",  this.powerupMap)
//     }, this); 
// };

// ObstacleManager.prototype.stopPowerupSpawning = function() {
//     this.powerups.forEach(function(powerup) {
//         powerup.enabled = false;
//     });

//     this.spawnTimer = null;
// };


// ObstacleManager.prototype.getAvailablePowerups = function() {
//     var keys = Object.keys(this.powerupMap);
//     for (var i = 0; i < keys.length; i++) {
//         var powerup = this.powerupMap[keys[i]];
//         if (!powerup.enabled) {
//             return powerup;
//         }
//     }
//     return null; 
// };

// ObstacleManager.prototype.spawnPowerup = function() {
//     var powerup = this.getAvailablePowerups();

//     //console.log("Spawn powerup", powerup)

//     if (powerup) {
//         var spawnPoint = this.getRandomSpawnPoint();
//         powerup.setPosition(spawnPoint.getPosition());
//         powerup.enabled = true;
//     }
// };


// ObstacleManager.prototype.despawnPowerup = function(powerupId) {
//     var powerup = this.powerupMap[powerupId];
//     if (powerup) {
//         powerup.enabled = false;
//     }
// };

// // Function to get a random spawn point
// ObstacleManager.prototype.getRandomSpawnPoint = function() {
//     var index = Math.floor(Math.random() * this.spawnPoints.length);
//     return this.spawnPoints[index];
// };

// ObstacleManager.prototype.update = function(dt) {
//     if (!this.spawnTimer) {
//         this.spawnTimer = 0;
//     }

//     this.spawnTimer += dt;

//     if (this.spawnTimer > this.spawnInterval) {
//         this.spawnPowerup();
//         this.spawnTimer = 0;
//         this.spawnInterval = this.getRandomSpawnInterval();
//     }
// };

// ObstacleManager.prototype.getRandomSpawnInterval = function() {
//     return 35 + Math.random() * 15;
// };


var Spawner=pc.createScript("spawner");Spawner.attributes.add("baseSpeed",{type:"number",default:2,title:"Base Speed",description:"Base speed of the translation"}),Spawner.attributes.add("xDistance",{type:"number",default:1.8,title:"X Distance",description:"Distance of the translation along the x-axis"}),Spawner.attributes.add("yDistance",{type:"number",default:1,title:"Y Distance",description:"Distance of the translation along the y-axis"}),Spawner.attributes.add("entityToSpawn",{type:"entity",title:"Entity To Spawn",description:"The entity to spawn at its local position"}),Spawner.attributes.add("yMin",{type:"number",default:-1,title:"Y Min",description:"Minimum y-coordinate for spawning"}),Spawner.attributes.add("yMax",{type:"number",default:2,title:"Y Max",description:"Maximum y-coordinate for spawning"}),Spawner.prototype.initialize=function(){Spawner.instance=this,this.initialPosition=this.entity.getPosition().clone(),this.direction=new pc.Vec2(1,1),this.spawnTimer=0,this.spawnInterval=this.getRandomInterval(),this.isSpawning=!1,this.difficultyIncreaseTimer=0,this.entityToSpawn||console.error("Entity to spawn is not assigned.")},Spawner.prototype.update=function(t){if(this.isSpawning){var i=this.baseSpeed+Math.random()*this.baseSpeed*2,n=i*t*this.direction.x,e=i*t*this.direction.y;this.entity.translateLocal(n,e,0),Math.abs(this.entity.getPosition().x-this.initialPosition.x)>=this.xDistance&&(this.direction.x*=-1),Math.abs(this.entity.getPosition().y-this.initialPosition.y)>=this.yDistance&&(this.direction.y*=-1),this.spawnTimer+=t,this.difficultyIncreaseTimer+=t,this.spawnTimer>=this.spawnInterval&&(this.spawnEntity(),this.spawnTimer=0,this.spawnInterval=this.getRandomInterval()),this.difficultyIncreaseTimer>=10&&(this.spawnInterval=Math.max(.1,this.spawnInterval-.05),this.difficultyIncreaseTimer=0)}},Spawner.prototype.spawnEntity=function(){var t=this.entityToSpawn.clone(),i=this.entity.getPosition().clone();i.x+=Math.random()*this.xDistance-this.xDistance/2,i.y+=Math.random()*(this.yMax-this.yMin)+this.yMin,t.setPosition(i),t.enabled=!0,this.app.root.addChild(t),this.direction.set(Math.random()>.5?1:-1,Math.random()>.5?1:-1)},Spawner.prototype.getRandomInterval=function(){return.25+.45*Math.random()},Spawner.prototype.startSpawning=function(){setTimeout(function(){this.isSpawning=!0,this.entityToSpawn.collision.enabled=!0,this.spawnEntity()}.bind(this),2e3)},Spawner.prototype.stopSpawning=function(){this.isSpawning=!1,this.entityToSpawn.collision.enabled=!1};var Cloud=pc.createScript("cloud");Cloud.prototype.initialize=function(){this.imageElement=this.entity.element,this.startOpacity=0,this.targetOpacity=.6,this.duration=1,this.elapsedTime=0,this.isLerping=!1,this.imageElement.opacity=.3},Cloud.prototype.update=function(t){if(this.isLerping){this.elapsedTime+=t;var i=this.elapsedTime/this.duration;i>1&&(i=1),this.opacity=pc.math.lerp(this.startOpacity,this.targetOpacity,i),this.imageElement.opacity=this.opacity,1===i&&(this.isLerping=!1)}},Cloud.prototype.startLerpingDown=function(){this.startOpacity=.6,this.targetOpacity=.2,this.isLerping=!0,this.elapsedTime=0},Cloud.prototype.startLerpingUp=function(){this.startOpacity=.3,this.targetOpacity=.6,this.isLerping=!0,this.elapsedTime=0};var ScrollingImage=pc.createScript("scrollingImage");ScrollingImage.speed=100,ScrollingImage.prototype.initialize=function(){this.upperLimit=1900,this.lowerLimit=-600},ScrollingImage.prototype.update=function(i){this.entity.translateLocal(0,-ScrollingImage.speed*i,0);var t=this.entity.getLocalPosition();t.y<=this.lowerLimit&&this.entity.setLocalPosition(t.x,this.upperLimit,t.z)},ScrollingImage.setSpeed=function(i){ScrollingImage.speed=i};var AudioControl=pc.createScript("audioControl");AudioControl.attributes.add("audioAssets",{type:"asset",assetType:"audio",array:!0}),AudioControl.prototype.initialize=function(){this.entity.addComponent("audiosource",{assets:this.audioAssets.map((o=>o.id)),volume:1,loop:!1}),this.app.on("audio:play",this.playAudio,this),this.app.on("audio:stop",this.stopAudio,this)},AudioControl.prototype.playAudio=function(o){var t=this.audioAssets.find((t=>t.name===o));t?this.entity.audiosource.play(t.name):console.warn("Audio asset not found: "+o)},AudioControl.prototype.stopAudio=function(o){var t=this.audioAssets.find((t=>t.name===o));t?this.entity.audiosource.stop(t.name):console.warn("Audio asset not found: "+o)},AudioControl.prototype.onDestroy=function(){this.app.off("audio:play",this.playAudio,this),this.app.off("audio:stop",this.stopAudio,this)};